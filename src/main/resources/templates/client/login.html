<div th:fragment="login">
	<div class="container">
		<div id="wrapper">
			<form th:object="${customer}" th:action="@{/ktlogin}" id="form-login" th:method="POST">
				<h1 class="form-heading">ĐĂNG NHẬP</h1>
				<div class="form-group">
					<i class="far fa-user"></i> <input type="text" class="form-input" placeholder="Số Điện Thoại" name ="phone" >
					<span id="phoneError" class="error"></span>
				</div>
				<div class="form-group">
					<i class="fas fa-key"></i> <input type="password" class="form-input" placeholder="Mật khẩu" name ="password" >
					<span id="passwordError" class="error"></span>
					<div id="eye">
						<i class="far fa-eye"></i>
					</div>
				</div>
				<a class="form-input" th:href="@{/register}">Tạo tài khoản mới</a>
				<input type="submit" value="Đăng nhập" class="form-submit">
			</form>
		</div>
	</div>
	<script>
		document.getElementById("form-login").addEventListener("submit", function (event) {
			// Ngăn chặn gửi form mặc định
			event.preventDefault();

			// Lấy giá trị từ các trường nhập liệu
			var phone = document.getElementsByName("phone")[0].value;
			var password = document.getElementsByName("password")[0].value;

			// Xóa thông báo lỗi cũ
			clearErrors();

			// Kiểm tra điều kiện và hiển thị thông báo lỗi tương ứng
			var hasError = false;

			if (phone === "") {
				showError("phoneError", "Số điện thoại không được bỏ trống");
				hasError = true;
			} else if (!phone.match(/^0[0-9]{9}$/)) {
				showError("phoneError", "Số điện thoại phải bắt đầu từ 0 và có 10 số");
				hasError = true;
			}

			if (password === "") {
				showError("passwordError", "Mật khẩu không được bỏ trống");
				hasError = true;
			}


			if (hasError) {
				document.getElementsByName("phone")[0].value = "";
				document.getElementsByName("password")[0].value ="";
				return;
			}

			event.target.submit();

		});

		function showError(id, message) {
			document.getElementById(id).innerHTML = message;
		}

		function clearErrors() {
			var errorElements = document.getElementsByClassName("error");
			for (var i = 0; i < errorElements.length; i++) {
				errorElements[i].innerHTML = "";
			}
		}

		function showError(id, message) {
			var errorElement = document.getElementById(id);
			errorElement.innerHTML = message;
			errorElement.classList.add("error"); 
		}

	</script>
</div>